<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Item Database</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
:root{
  --bg:#0b0e14;
  --panel:#121826;
  --panel-2:#0f1422;
  --border:#1e2538;
  --text:#e6e8ee;
  --muted:#9aa4b2;
  --accent:#5da9ff;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  background:var(--bg);
  color:var(--text);
}
header{
  padding:16px 24px;
  font-size:22px;
  font-weight:600;
  background:linear-gradient(180deg,var(--panel),var(--panel-2));
  border-bottom:1px solid var(--border);
}
main{
  display:grid;
  grid-template-columns:300px 1fr;
  height:calc(100vh - 65px);
}
aside{
  background:var(--panel-2);
  border-right:1px solid var(--border);
  overflow:auto;
  padding:14px;
}
section{
  padding:26px;
  overflow:auto;
}
.group-title{
  font-weight:700;
  color:var(--accent);
  padding:10px 12px;
  cursor:pointer;
  border-radius:10px;
}
.group-title:hover{
  background:rgba(93,169,255,.15);
}
.subgroup{
  margin-left:10px;
  margin-top:6px;
  display:none;
}
.subgroup-title{
  font-weight:600;
  padding:8px 10px;
  cursor:pointer;
  border-radius:8px;
}
.subgroup-title:hover{
  background:rgba(255,255,255,.06);
}
.item-list{
  margin-left:12px;
  margin-top:6px;
}
.item{
  padding:6px 10px;
  color:var(--muted);
  cursor:pointer;
  border-radius:8px;
}
.item:hover{
  background:rgba(255,255,255,.06);
  color:var(--text);
}
.item.active{
  background:rgba(93,169,255,.25);
  color:#fff;
}
.card{
  max-width:1000px;
  background:linear-gradient(180deg,#141a2b,#0f1422);
  border:1px solid var(--border);
  border-radius:18px;
  padding:22px;
}
.card h2{margin-top:0}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:12px;
}
.field{
  background:#0e1424;
  border:1px solid var(--border);
  border-radius:10px;
  padding:10px;
}
.key{
  font-size:13px;
  color:var(--muted);
  margin-bottom:4px;
}
.value{
  font-size:13px;
  white-space:pre-wrap;
}
img{
  max-width:220px;
  border-radius:14px;
  margin-bottom:16px;
  border:1px solid var(--border);
}
.placeholder{color:var(--muted)}
</style>
</head>
<body>
<header>Item Database</header>
<main>
<aside id="sidebar"></aside>
<section id="content">
  <div class="placeholder">Select an item to view its details.</div>
</section>
</main>

<script>
function normalizeCategory(path){
  const [group, sub] = path.split('/');
  return { group: group.toLowerCase(), sub: sub?.replace('.lua','') };
}

async function load(){
  const res = await fetch('./items.json');
  const data = await res.json();
  const sidebar = document.getElementById('sidebar');
  const content = document.getElementById('content');

  const groups = {};

  for(const [path, items] of Object.entries(data)){
    const { group, sub } = normalizeCategory(path);
    groups[group] ??= {};
    const bucket = sub || 'misc';
    groups[group][bucket] = items;
  }

  for(const [groupName, subgroups] of Object.entries(groups)){
    const groupDiv = document.createElement('div');
    const groupTitle = document.createElement('div');
    groupTitle.className = 'group-title';
    groupTitle.textContent = groupName.charAt(0).toUpperCase() + groupName.slice(1);
    const groupContent = document.createElement('div');
    groupContent.className = 'subgroup';

    groupTitle.onclick = () => {
      groupContent.style.display = groupContent.style.display === 'block' ? 'none' : 'block';
    };

    for(const [subName, items] of Object.entries(subgroups)){
      const subDiv = document.createElement('div');
      const subTitle = document.createElement('div');
      subTitle.className = 'subgroup-title';
      subTitle.textContent = subName.replace(/_/g,' ').toUpperCase();
      const itemList = document.createElement('div');
      itemList.className = 'item-list';

      subTitle.onclick = () => {
        itemList.style.display = itemList.style.display === 'none' ? 'block' : 'block';
      };

      for(const [itemName, itemData] of Object.entries(items)){
        const item = document.createElement('div');
        item.className = 'item';
        item.textContent = itemName;

        item.onclick = () => {
          document.querySelectorAll('.item').forEach(i=>i.classList.remove('active'));
          item.classList.add('active');
          content.innerHTML = '';
          const card = document.createElement('div');
          card.className = 'card';

          const h = document.createElement('h2');
          h.textContent = itemName;
          card.appendChild(h);

          if(itemData.image){
            const im = document.createElement('img');
            im.src = itemData.image;
            card.appendChild(im);
          }

          const grid = document.createElement('div');
          grid.className = 'grid';

          for(const [k,v] of Object.entries(itemData)){
            if(k === 'image') continue;
            const f = document.createElement('div');
            f.className = 'field';
            const kk = document.createElement('div');
            kk.className = 'key';
            kk.textContent = k;
            const vv = document.createElement('div');
            vv.className = 'value';
            vv.textContent = typeof v === 'object' ? JSON.stringify(v,null,2) : String(v);
            f.appendChild(kk); f.appendChild(vv);
            grid.appendChild(f);
          }

          card.appendChild(grid);
          content.appendChild(card);
        };

        itemList.appendChild(item);
      }

      subDiv.appendChild(subTitle);
      subDiv.appendChild(itemList);
      groupContent.appendChild(subDiv);
    }

    groupDiv.appendChild(groupTitle);
    groupDiv.appendChild(groupContent);
    sidebar.appendChild(groupDiv);
  }
}

load();
</script>
</body>
</html>
